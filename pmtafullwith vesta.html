<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
<h1>power mta instalation guide </h1>    
<ol>
    <li>change the host names with <code>ns1.domain.com</code> and <code>ns2.domain.com</code> by giving <b>ip</b></li>
    <details>
        

        <p>for godaddy go to dns management >> advanced feature </p>

    </details>
    <li>
        change the name server and ip in domain provider
    </li>
    <li>install vesta cp using their command lines andlso make rdns in contabo </li>

    <li>
        login to vesta cp
        <details>
        <br>>>user >> admin>>edit >> name server >>> SOA change it to ns1.yourdomain.com
        <br>>> web >> add doamin >> add your doamin and do as needed 
        <br>DNS >> add record >> type A record >> ns1 and ns2 and ip for domain
        <br>test the doamin and check it 
    </details>
    </li>
    <li>
       <br> Mail >> domain.com>> add account >> info , bounce , dmarc and abuse@domain.com, postmaster@domain.com and fbl@domain.com. 
       <br> check the inbox wiht roundcube and fix if needed 
       <details>
        <br><code>/etc/dovecot/dovecot.conf</code>
        <br> add the lines 
        <br> <code>
                namespace inbox {
                    inbox = yes
                    }
        </code>
        <br>service dovecot restart 



       </details>

    </li>

    <li>
        install pmta and run <code>pmtad --debug </code>to debug the program 
        <br>first copy the <code>/etc/pmta/licence</code> 
        <br>secondly copy the files in <code>/usr/sbin</code> to the folder 
        <br>thirdly copy the config file after making changes 

    </li>
    <li>
        set dkim record 
        <details>
                <br> find / -name dkim.pem
        
                <br> mv dkim.pem dkim_old
                 
                <br> openssl genrsa -out dkim.private.key 1024 
                 
                <br> openssl rsa -in dkim.private.key -out dkim.public.key -pubout -outform PEM
                 
                <br> mv dkim.private.key dkim.pem
                 
                <br> vim dkim.public.key
                 
                <br> service pmta restart
         
         </code>
         
         <h3>the dkim template</h3>
         <p>
             <br>    Host: dkim._domainkey
                <br> TXT Value : "v=DKIM1; k=rsa; p=MIGfMA0GCSqGSIb3DQEXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
         </p>

        </details>

    </li>
    <li>
        set SPF and Dmarc

        <details>



    
        <br> SPF:
        <br>  "v=spf1 a mx ip4:54.218.71.176 p4:54.218.71.176 ip4:54.218.71.176 ~all"
            
        <br> DMARC:
        <br>   v=DMARC1; p=none; fo=1; rua=mailto:dmarc@xmailing.me; ruf=mailto:dmarc@xmailing.me
        <br>
        <br>dns zone . txt record  host @ txt valuse spf rexxord 

        
        </details>
    </li>
    <li>
        Add mx record and also add the ip servers in that .
    </li>

    <li>
        make changes to the <code>/etc/sysconfig/network-scripts</code>
        <br>renaem and edit as follows
        <details>
                GNU nano 2.3.1   File: /etc/sysconfig/network-scripts/ifcfg-eth0:2            

               <br> # Generated by parse-kickstart
               <br> #UUID="7f061007-25ea-4b5a-bc39-1aad8da28505"
               <br> #DNS2="213.136.95.10"
               <br> #DNS1="213.136.95.11"
               <br> IPADDR="144.91.82.34"
               <br> GATEWAY="144.91.64.1"
               <br> NETMASK="255.255.192.0"
               <br> #BOOTPROTO="static"
               <br> DEVICE="eth0:2"
               <br> ONBOOT="yes"
               <br> #IPV6INIT="yes"
               <br> #IPV6ADDR="2a02:c207:2030:6799:0000:0000:0000:0001/64"
               <br> #IPV6_DEFAULTGW="fe80::1"
               <br> #IPV6_DEFAULTDEV="eth0"
                
                


        </details>
        <br> restart the network 
    </li>
    <li>installing mail wizz

        <details>
           <br> web > add domain > add > soft.yourdomain.com
           <br>upload to soft.yourdomain.com dir public_html
           <br>unzip and copy lastest to soft.yourdomain.com public html dir mail folder 
           <br>install by >> soft.yourdoamin.com/mail/index.php 
           <br>fix issues chmod -R 777
           <br>DB >> add db > naem email . user email etc and start importing 
           <br>admin credentials and do the cron job by <code>crontab -e </code>
           <br>restart crond and remove the instlal folder <code> rm -rf install </code>


        </details>

    </li>
    <li>
       <br> setiing up bounce server 
       <br> servers > bounce > in host "server.doamin.com"
       <br>  server >> delivery server >> give config file id pass
       <br> feedback loop >>> create 3 >> abuse , postmaster, fbl



    </li>
    <li>
        log in as the backend and create list then template and then campaign
    </li>
































</ol>








</body>
</html>